<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Basic commands of Tcl · 光光的小站</title><meta name="description" content="Basic commands of Tcl - Tony Wang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://esfak47.github.io/atom.xml" title="光光的小站"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Basic commands of Tcl</h1><div class="post-info">Jul 14, 2014</div><div class="post-content"><h2 id="Tcl-学习之路"><a href="#Tcl-学习之路" class="headerlink" title="Tcl 学习之路"></a>Tcl 学习之路</h2><p>###变量</p>
<ul>
<li>tcl变量在初始化的时候无类型</li>
<li>使用set xxx = xxxx进行初始化</li>
<li>使用set xxx可以查看xxx的值</li>
<li>使用unset将变量release掉</li>
<li>预定义的变量包括env（系统变量）argv（脚本执行的参数）argc（脚本参数的个数）argv0执行脚本的程序名</li>
</ul>
<p>###【】的使用</p>
<ul>
<li>【】用于将内部命令结果的返回值作为另外一个命令的参数</li>
<li>比如 set var2 【set var】就把var的只传给了var2</li>
</ul>
<p>###“”的使用</p>
<ul>
<li>用于把一段内容封装成string类型</li>
<li>比如 set var “multiple word”</li>
<li>可以在“”中加入【】之类进行替换</li>
<li>比如 set b “a is [set a]” 会打印a is 2</li>
<li>特殊字符如\n等同样有效</li>
</ul>
<p>###{}的使用</p>
<ul>
<li>如果内容内部不需要对特殊字符进行处理，那么可以使用{}</li>
<li>如set a {123\n},则不会对\n进行处理</li>
</ul>
<p>###数组<br>set earnings(January) 87966<br>注意tcl中的array是基于map形式的，没有固定的元素顺序，需要顺序的话可以使用列表，这里的数组有点像java中的set，索引始终是字符串类型的，即使你使用1作为索引，他依然是将1转换成字符串</p>
<p>###多维数组</p>
<ul>
<li>可以通过多个索引实现多维数组</li>
<li>例如set matrix（1,1）140</li>
</ul>
<p>###查询数组元素<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> currency(Frence) euro</span><br><span class="line"><span class="keyword">set</span> currency(Britain) pound</span><br><span class="line"><span class="keyword">set</span> currency(Japan) yen</span><br><span class="line"><span class="keyword">array</span> size currency</span><br><span class="line"><span class="comment"># =&gt;3</span></span><br><span class="line"><span class="keyword">array</span> names currency</span><br><span class="line"><span class="comment"># =&gt; Britain Japan Frence</span></span><br><span class="line"><span class="keyword">foreach</span> i [<span class="keyword">array</span> names currency] &#123;</span><br><span class="line">	<span class="keyword">puts</span> currency($i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># =&gt; pound yen euro</span></span><br></pre></td></tr></table></figure></p>
<p>###列表<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> a &#123;<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>&#125;</span><br><span class="line"><span class="keyword">lindex</span> $a <span class="number">2</span></span><br><span class="line"><span class="comment">#=&gt; 2</span></span><br><span class="line"><span class="keyword">set</span> a [<span class="keyword">list</span> a b c d e f g]</span><br><span class="line"><span class="keyword">lindex</span> $a <span class="number">2</span></span><br><span class="line"><span class="comment">#=&gt; b</span></span><br><span class="line"><span class="comment">#concat ?arg arg ...?</span></span><br><span class="line"><span class="comment">#使用多个arg来组成一个列表，这两个命令使用频度很高，使用也非常简单</span></span><br></pre></td></tr></table></figure></p>
<p>###字符串操作<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string</span> length <span class="keyword">string</span></span><br><span class="line"><span class="comment">#返回String中的字符串个数</span></span><br><span class="line"><span class="keyword">string</span> range <span class="keyword">string</span> first last</span><br><span class="line"><span class="comment">#返回string当中从first到last之间的所有子字符串</span></span><br><span class="line"><span class="keyword">string</span> match ?-nocase? pattern <span class="keyword">string</span></span><br><span class="line"><span class="comment">#尝试对string进行匹配，匹配成功返回1，否则返回0</span></span><br><span class="line"><span class="keyword">string</span> relace <span class="keyword">string</span> first last ？newstring？</span><br><span class="line"><span class="comment">#尝试将frist到last中间所有字符串替换为newstring</span></span><br><span class="line"><span class="keyword">string</span> trim <span class="keyword">string</span></span><br><span class="line"><span class="comment">#尝试删除string前后的空格</span></span><br><span class="line"><span class="keyword">string</span> compare string1 string2</span><br><span class="line"><span class="comment">#尝试比较string1和string2</span></span><br><span class="line"><span class="keyword">string</span> is digit <span class="number">1234</span></span><br><span class="line"><span class="comment">#返回1234是否为数字</span></span><br></pre></td></tr></table></figure></p>
<p>###正则表达式<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">regex &#123;^[<span class="number">0</span><span class="number">-9</span>]+$&#125; <span class="number">510</span></span><br><span class="line"><span class="comment">#尝试对后面的字符串进行匹配，若匹配成功返回1，否则返回0</span></span><br><span class="line">regex &#123;([<span class="number">0</span><span class="number">-9</span>]+) *([a-z]+)&#125;</span><br></pre></td></tr></table></figure></p>
</div></article></div></main><footer><div class="paginator"><a href="/2014/07/15/using-nodejs-webkit/" class="prev">PREV</a></div><div class="copyright"><p>© 2015 - 2018 <a href="http://esfak47.github.io">Tony Wang</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>